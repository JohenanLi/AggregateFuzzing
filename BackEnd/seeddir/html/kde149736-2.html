<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
		<title>khtml CRASH :D</title>
	</head>
	<body>
		Testcase without that avoids beeing asked to close the window and get the segv a bit quicker ;)<br/>
		<input type="button" onclick="popup(0)" value="popup" />
	</body>
	<script type="text/javascript">
		function popup(fit_to_screen) {
			win = window.open('', 'khtmlCRASHwindow', 'height=400,width=200,top=100,left=100,scrollbars=0,resizable=no')
			win.document.open();
			win.document.write('<html><head>');
			win.document.write('<scr' + 'ipt type="text/javascr' + 'ipt" language="JavaScr' + 'ipt">');
			win.document.write("function click() { window.close(); } ");
			win.document.write("document.onmousedown=click ");
			win.document.write('</scr' + 'ipt>');
			win.document.write('<title>khtml POPUP crash</title></head>');
			win.document.write('<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0" onBlur="window.close()">')
			win.document.write("do a right click and get a segfault :)</body></html>");
			win.document.close();
		}
	</script>
</html>